var wui = wui || {}; wui.pagingDefaultOptions = { el: "", mel: "", url: "", mode: "POST", pageIndex: 0, pageSize: 10, isBounce: !1, empty: { el: "", icon: "/Resources/images/empty-data.png", tip: "亲,暂无相关数据哦~", text: "刷新看看" }, firstChange: function () { }, afterChange: function () { }, getData: function () { } }; wui.paging = function (n) { function r(t, i, r, u) { var o = { PageIndex: t, PageSize: i }, e, f, s; return n.getData && (e = n.getData(), f = {}, e instanceof Array ? $.each(e, function () { f[this.name] = f[this.name] != null ? f[this.name] + "," + this.value : this.value }) : f = e, o = $.extend(o, f)), s = { url: n.url, data: o, type: n.mode || "POST", dataType: "json", success: function (n) { if (!n.Success) { switch (n.StatusCode) { case 401: alert("您未登录或会话已过期，请重新登录！"); break; case 403: alert("您暂无权限操作此功能，请联系管理员！"); break; default: alert(n.Message) } u(n); return } if (n.Content.PageCount == undefined) { var t = { Data: n.Content, PageCount: 1, PageIndex: 1, Count: n.Content.length }; r(t); return } r(n.Content) }, error: function (n, t, i) { var r = { StatusCode: 0, Success: !1, Message: i, Content: null }; u(r) } }, jQuery.ajax(s) } var t = this, i; return wui.pagingDefaultOptions.empty.click = function () { t.refresh() }, n = $.extend(!0, wui.pagingDefaultOptions, n), n.mel = n.mel == "" ? n.el : n.mel, t.container = document.getElementById(n.el), i = { el: "#" + n.el, data: { mescroll: null, items: [], content: {} }, mounted: function () { var t = this; t.mescroll = new MeScroll(n.mel, { up: { callback: t.upCallback, page: { num: n.pageIndex, size: n.pageSize }, htmlNodata: '<p class="upwarp-nodata">-- END --<\/p>', toTop: {}, empty: { warpId: n.empty.el, icon: n.empty.icon, tip: n.empty.tip, btntext: n.empty.text, btnClick: n.empty.click }, isBounce: n.isBounce } }) }, methods: { upCallback: function (t) { var i = this; r(t.num, t.size, function (r) { i.content = r; n.firstChange(r); t.num == 1 && (i.items = []); var u = i.items.concat(r.Data); i.items = u; i.mescroll.endSuccess(r.Data.length, r.PageIndex < r.PageCount); n.afterChange(r) }, function () { i.mescroll.endErr() }) } } }, i.methods = $.extend(!0, i.methods, n.methods), t.vue = new Vue(i), t.mescroll = t.vue.mescroll, t.refresh = function () { t.vue.mescroll.resetUpScroll() }, t.setBounce = function (n) { t.vue.mescroll.setBounce(n) }, t }; wui = wui || {}; wui.passwordboxDefaultOptions = { maxLength: 6, amount: "0元", upsetKeyboard: !1, title: "请输入密码", reminder: "温馨提示：请输入您的支付密码", remarks: "本次支付金额", height: 400, width: 0, onComplete: null }, function (n) { "use strict"; n.passwordbox = function (t, i) { if (!(this instanceof n.passwordbox)) return new n.passwordbox(t, i); var r = this; return r.el = n(t), r.passwordboxId = Math.floor(Math.random() * 1e3) + "", r.tagName = r.el.get(0).tagName, r.keyValues = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0], r.inputs = [], r.passwordbox = null, r.el.data("passwordbox", r), r.init = function (t) { r.options = n.extend(!0, {}, wui.passwordboxDefaultOptions, t); r.render() }, r.render = function () { r.renderHtml(); r.bindEvents() }, r.renderHtml = function () { var i = template.get("wui.passwordbox.html"), t = n(i).attr("id", r.passwordboxId); r.el.append(t); r.passwordbox = t; n(".title", t).html(r.options.title); n(".amount", t).html(r.options.amount); n(".reminder", t).html(r.options.reminder); n(".remarks", t).html(r.options.remarks); r.setKeyValue() }, r.bindEvents = function () { n(".keyboard td", r.passwordbox).bind("selectstart", function () { return !1 }); n(".keyboard td", r.passwordbox).click(function () { var t = n(this).html(), i = n(this).attr("data-keytype"); n(this).hasClass("disable") || r.change(i, t) }) }, r.setKeyValue = function () { var t = r.keyValues; r.options.upsetKeyboard && (t = t.sort(function () { return Math.random() - .5 })); n(".keyboard td[data-keytype='number']", r.passwordbox).each(function (i, r) { n(r).html(t[i]) }) }, r.change = function (n, t) { switch (n) { case "empty": r.empty(); break; case "remove": r.remove(); break; default: r.input(t) } r.notifyView(); r.inputs.length == r.options.maxLength && r.inputComplete() }, r.empty = function () { r.inputs = []; r.enableKeyboard() }, r.remove = function () { r.inputs.pop(); r.enableKeyboard() }, r.input = function (n) { r.inputs.length >= r.options.maxLength || r.inputs.push(n) }, r.notifyView = function () { n(".box-input td").each(function (t, i) { if (t < r.inputs.length) { var u = n(i).html(); if (u == "<i><\/i>") return; n(i).html("<i><\/i>") } else n(i).html("") }) }, r.disableKeyboard = function (t) { t ? n(".keyboard td[data-keytype='" + t + "']", r.passwordbox).addClass("disable") : n(".keyboard td", r.passwordbox).addClass("disable") }, r.enableKeyboard = function (t) { t ? n(".keyboard td[data-keytype='" + t + "']", r.passwordbox).removeClass("disable") : n(".keyboard td", r.passwordbox).removeClass("disable") }, r.inputComplete = function () { r.disableKeyboard("number"); var n = r.inputs.join(""); r.options.onComplete && (r.loading(), r.options.onComplete(n) ? r.hide() : r.change("empty"), r.loadend()) }, r.loading = function () { r.disableKeyboard(); n(".loading", r.passwordbox).show(); n(".close", r.passwordbox).hide() }, r.loadend = function () { n(".loading", r.passwordbox).hide(); n(".close", r.passwordbox).show() }, r.getValue = function () { return r.inputs.join("") }, r.show = function () { r.change("empty"); r.setKeyValue(); n(r.passwordbox).modal({ keyboard: !1, show: !0, backdrop: "static" }) }, r.hide = function () { n(r.passwordbox).modal("hide") }, r.callMethod = function (t, i) { switch (t) { case "option": r.options = n.extend({}, r.options, i); r.passwordbox.remove(); r.init(r.options); break; case "show": r.show(i); break; case "hide": r.hide(i); break; case "getValue": return r.getValue(); case "empty": r.change("empty"); break; case "remove": r.change("remove"); break; default: throw new Error("[passwordbox]对象未找到 [" + t + "]方法"); } return r.el }, r.init(i), r.el }; n.fn.passwordbox = function () { var i = this, r = Array.prototype.slice.call(arguments), u, t; if (typeof r[0] == "string") { if (t = n(i).data("passwordbox"), t) return t.callMethod(r[0], r[1]); throw new Error("$(" + i.selector + ").passwordbox() 控件未实例化，无法直接调用其函数"); } else for (u = 0; u < i.length; u++) { if (t = n(i.eq(u)).data("passwordbox"), t) { t.callMethod("option", r[0]); continue } new n.passwordbox(i[u], r[0]) } } }(jQuery); wui = wui || {}; wui.tipDefaultOptions = {}; wui.tip = function (n, t, i, r) { var u, f, e, o; t = t || "default"; i = i || 3e3; n = n || "未指定错误信息"; r = r || function () { }; u = "wui-tip-default"; switch (t) { case "default": u = "wui-tip-default"; break; case "primary": u = "wui-tip-primary"; break; case "success": u = "wui-tip-success"; break; case "info": u = "wui-tip-info"; break; case "warning": u = "wui-tip-warning"; break; case "danger": u = "wui-tip-danger"; break; default: u = "wui-tip-default" } f = $(".wui-tip"); f.length == 0 && (f = $("<div>"), e = $("<div>").addClass("wui-tip-message"), f.append(e), f.appendTo("body")); f.removeClass(); f.addClass("wui-tip").addClass(u); $(".wui-tip-message", f).html(n).css("width", n.length + 5 + "em"); f.fadeIn(500); o = setTimeout(function () { $(".wui-tip").fadeOut(500, function () { r && r() }) }, i) }; wui = wui || {}; wui.webviewDefaultOptions = { el: "", touchBack: !0 }; wui.webview = function (n) { function i(i) { var i = i || window.event, u, f, e, r; switch (i.type) { case "touchstart": r = i.targetTouches[0]; t.touch.startX = r.pageX; t.touch.startY = r.pageY; break; case "touchend": if (!n.touchBack) return; if (u = t.touch.endX - t.touch.startX, u <= 0) return; if (f = t.diff(t.touch.endY, t.touch.startY), f > u || f > 100) return; e = document.documentElement.clientWidth; t.touch.startX != Math.abs(u) && Math.abs(u) > e * .3 && u > 0 && t.back(); t.touch.startX = t.touch.startY = t.touch.endX = t.touch.endY = 0; break; case "touchmove": r = i.targetTouches[0]; t.touch.endX = r.pageX; t.touch.endY = r.pageY } } var t = this; return n = $.extend(!0, wui.webviewDefaultOptions, n), t.el = $(n.el), t.cover, t.viewStack = [], t.currentView, t.prevView, t.touch = { startX: 0, startY: 0, endX: 0, endY: 0 }, t.init = function () { t.renderHtml() }, t.renderHtml = function () { t.cover = $("<div>").addClass("wui-webview-cover"); t.cover.appendTo(t.el) }, t.switch = function (n) { var r = t.el.find(".wui-webview-block"), i = null; if (i = typeof n == "string" ? t.el.find(".wui-webview[wui-webview-name='" + n + "']").eq(0) : t.el.find(".wui-webview").eq(n), i == null) throw new Error("找不到wui-webview-name 为[" + n + "] 的选项"); t.viewNext(r, i) }, t.back = function () { var n = t.viewStack[t.viewStack.length - 1], i = t.viewStack[t.viewStack.length - 2]; t.viewBack(n, i) }, t.backFirst = function () { var n = t.viewStack[t.viewStack.length - 1], i = t.viewStack[0]; t.viewBack(n, i); t.viewStack = [] }, t.viewBack = function (n, i) { var r = t.el.width(); n.addClass("wui-webview-activity"); i.addClass("wui-webview-block"); t.cover.fadeIn(100, function () { n.animate({ left: r }, 500, function () { t.cover.hide(); n.removeClass("wui-webview-activity wui-webview-block") }) }); t.viewStack.pop(); t.viewStack.pop() }, t.viewNext = function (n, i) { var r = t.el.width(), u = t.el.offset().top, f = t.el.offset().left; if (i.addClass("wui-webview-block wui-webview-activity"), i.css({ left: r, top: u }), t.cover.fadeIn(100, function () { i.animate({ left: f }, 500, function () { t.cover.hide(); i.removeClass("wui-webview-activity"); n.removeClass("wui-webview-block") }) }), t.viewStack.length > 0 && t.viewStack[0] == i) { t.viewStack = []; return } t.viewStack.push(n, i) }, t.el[0].addEventListener("touchstart", i, !1), t.el[0].addEventListener("touchmove", i, !1), t.el[0].addEventListener("touchend", i, !1), t.diff = function (n, t) { return n > t ? n - t : t - n }, t.init(), t }