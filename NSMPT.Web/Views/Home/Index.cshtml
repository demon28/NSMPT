
@{
    ViewBag.Title = "Index";

}


@section HtmlHead{

    <script src="~/ckeditor/ckeditor.js"></script>
    <link href="~/Content/nsmpt.css" rel="stylesheet" />
}


@section Pageheader{

    <div>
        <button type="button" id="btn_send" class="btn btn-block btn-success">发 送</button>
    </div>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Mailbox</li>
    </ol>

}

<div class="box box-info">

    <!-- /.box-header -->
    <!-- form start -->
    <form class="form-horizontal">
        <div class="box-body">
            <div class="form-group">
                <label for="inputEmail3" class="col-sm-1 control-label">寄件人邮箱</label>

                <div class="col-sm-10">
                    <input type="email" class="form-control" id="txt_sendermail" placeholder="Sneder Email">
                </div>
            </div>
            <div class="form-group">
                <label for="inputPassword3" class="col-sm-1 control-label">寄件人密码</label>

                <div class="col-sm-10">
                    <input type="password" class="form-control" id="txt_senderpwd" placeholder="Sneder Password">
                </div>
            </div>

            <div class="form-group">
                <label for="inputEmail3" class="col-sm-1 control-label">收件人邮箱</label>

                <div class="col-sm-10">
                    <input type="email" class="form-control" id="txt_recivermail" placeholder="Reciver Email">
                </div>
            </div>
            <div class="form-group">
                <label for="inputEmail3" class="col-sm-1 control-label">主 题</label>

                <div class="col-sm-10">
                    <input type="email" class="form-control" id="txt_mailtitle" placeholder="Reciver Email">
                </div>
            </div>

        </div>
        <!-- /.box-body -->
        <!-- /.box-footer -->
    </form>
</div>
<!-- /.box -->






<div id="alert_Fail" class="alert alert-danger alert-dismissible">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
    <h4><i class="icon fa fa-ban"></i> Alert!</h4>
    邮件发送失败！
</div>




<div id="alert_Success" class="alert alert-success alert-dismissible">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="false">×</button>
    <h4><i class="icon fa fa-check"></i> Alert!</h4>
    邮件发送成功！
</div>



<div>
    <textarea name="description" id="description"></textarea>



</div>






<script type="text/javascript">
    window.onload = function () {
        CKEDITOR.replace('description', {
            height: 500,
        });

    };

    $(document).ready(function () {
        $("#txt_sendermail").val("jelly2019@clearandfresh.net");
        $("#txt_senderpwd").val("Aa654321@@");
        $("#txt_recivermail").val("274733956@qq.com");
        $("#txt_mailtitle").val("这是一个测试邮件");
        content: CKEDITOR.instances['description'].setData("<span sytlye='color:red'>发送一个红色字体的测试邮件</span>");
        $("#alert_Success").hide();
        $("#alert_Fail").hide();
    }
    );




    $("#btn_send").click(function () {

        $.ajax({
            url: "/Home/SendMail",
            type: "POST",
            data: {
                sendermail: $("#txt_sendermail").val(),
                senderpwd: $("#txt_senderpwd").val(),
                recivermail: $("#txt_recivermail").val(),
                content: CKEDITOR.instances['description'].getData(),
                mailtitile: $("#txt_mailtitle").val()
            },
            success: function (result) {
                if (!result.Success) {
                    $("#alert_Success").show().delay(2000).hide(300);

                } else {

                    $("#alert_Fail").show().delay(2000).hide(300);
                }
            }
        });


    });



</script>