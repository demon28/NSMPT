
@{
    ViewBag.Title = "Read";
}
@section Pageheader{


    <h1>
        <small>  ReadMail</small>

    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">ReadMail</li>
    </ol>

}

<div class="box box-primary" id="app_content">
    <div class="box-header with-border">
        <h3 class="box-title">Read Mail</h3>

        <div class="box-tools pull-right">
            <a href="#" class="btn btn-box-tool" data-toggle="tooltip" title="Previous"><i class="fa fa-chevron-left"></i></a>
            <a href="#" class="btn btn-box-tool" data-toggle="tooltip" title="Next"><i class="fa fa-chevron-right"></i></a>
        </div>
    </div>
    <!-- /.box-header -->
    <div class="box-body no-padding">
        <div class="mailbox-read-info">
            <div class="pull-right">
                <button type="button" class="btn btn-default"><i class="fa fa-reply"></i> Reply</button>
                <button type="button" class="btn btn-default"><i class="fa fa-share"></i> Forward</button>

                <button type="button" class="btn btn-default"><i class="fa fa-trash-o"></i> Delete</button>
                <button type="button" class="btn btn-default"><i class="fa fa-print"></i> Print</button>
            </div>
            <h3>{{Subject}}</h3>
            <h5>
                From: {{SenderMail}}
                &nbsp;&nbsp;&nbsp;<span class="mailbox-read-time">{{Rectimer}}</span>
            </h5>


        </div>


        <!-- /.mailbox-controls -->
        <div class="mailbox-read-message">

            <textarea name="description" id="description"></textarea>

        </div>
        <!-- /.mailbox-read-message -->
    </div>
    <!-- /.box-body -->
    <!-- /.box-footer -->
</div>
<!-- /. box -->


@section scripts{
    <script src="~/Reference/scripts/CommonScript.js"></script>
    <script src="~/Reference/adminLTE/bower_components/ckeditor/ckeditor.js"></script>

    <script>
        window.onload = function () {
            CKEDITOR.replace('description', {
                height: 500
            });
        }

        var content_vm;
        var attchment_vm;
        var recid;

        $(document).ready(function () {


            recid = getQueryString("recid");

            BindContentView();
            BindAttchmentView();
            SetEvent();

        });

        function BindContentView() {
            content_vm = new Vue({

                el: "#app_content",
                data: {
                    Recid: "",
                    SenderMail: "",
                    SenderName: "",
                    ReciverName: "",
                    ReciverMail: "",
                    Subject: "",
                    Rectimer: "",
                    Content: ""
                },
                created: function () {
                    this.Init();
                },
                methods: {
                    Init: function () {

                        var self = this;
                        $.ajax({
                            url: "/ReceiveEmail/GetContent",
                            type: "POST",
                            data: {
                                recid: recid
                            },
                            success: function (result) {
                                self.Content = result.content;
                                self.Recid = result.recid;
                                self.SenderMail = result.sender_mail;
                                self.SenderName = result.sender_name;
                                self.ReciverName = result.reciver_name;
                                self.ReciverMail = result.reciver_mail;
                                self.Subject = result.subject;
                                self.Rectimer = result.rectimer;
                                self.Content = result.content;

                                CKEDITOR.instances['description'].setData(self.Content);
                            }
                        })
                    },
                    AccountUse: function (item) {
                        $("#lb_aid").val(item.Aid);
                        recmail_vm.Init();
                    }

                }

            });

        }
        function BindAttchmentView() {


        }

        function SetEvent() {


        }




    </script>


}

